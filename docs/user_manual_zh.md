**FTX-1 控制台 (ftx1gui)**

***

# FTX-1 控制台用户手册

本手册提供了使用 `ftx1gui` 软件控制 FTX-1 电台的综合指南。内容涵盖连接设置、频率管理、发射控制以及高级音频处理功能。

## 1. 连接设置 (顶部面板)

应用程序的顶部区域专门用于建立与电台及外部软件的通信。

### CAT 控制 (计算机辅助收发)
*   **CAT 串口 (CAT Port)**: 选择用于向电台发送指令（频率、模式等）的 COM 端口。
    *   *默认逻辑*: 软件会自动扫描可用端口。它会优先选择名为 "**Enhanced COM Port**" 的端口（常见于 Yaesu 电台使用的 Silicon Labs 驱动）。如果未找到，则默认为第一个可用端口。
*   **波特率 (Baud)**: 设置通信速率。
    *   *默认*: **38400** bps。请确保此设置与您电台菜单中的设置 (CAT RATE) 匹配。

### PTT 控制 (一键通)
*   **PTT 串口 (PTT Port)**: 选择用于通过 RTS (请求发送) 信号触发发射的 COM 端口。
    *   *默认逻辑*: 优先选择名为 "**Standard COM Port**" 的端口。如果您有两个端口（Enhanced 和 Standard），Standard 端口通常用于 PTT/CW 键控。
*   **波特率 (Baud)**: 设置 PTT 端口的速率（通常不如 CAT 重要）。
    *   *默认*: **38400** bps。

### 连接按钮
*   **连接 (Connect)**: 打开 COM 端口并开始轮询电台。
*   **断开 (Disconnect)**: 关闭连接并停止轮询。
*   **全量读取 (Full Read)**: 强制将电台的所有设置完全同步到用户界面。
    *   *注意*: 软件在设置参数后会自动安排全量读取，但如果界面显示不同步，此按钮非常有用。

### Rigctl 服务器 (网络控制)
*   **rigctl TCP 端口**: 内置 Hamlib 兼容 TCP 服务器的端口号。
    *   *默认*: **4532**。
    *   *用途*: 允许第三方软件（如 WSJT-X, N1MM 或 Log4OM）通过连接到 `localhost:4532` 并使用 "Hamlib NET rigctl" 模型（模型 ID 2）来*通过*本应用程序控制电台。

---

## 2. 频率与模式 (左侧面板)

### 频率显示
*   **显示**: 以 Hz 为单位显示当前频率。

*  **逐位调谐**: 
    1. 将鼠标光标悬停在您想要更改的特定数字上。
    2. **鼠标滚轮**: 向上滚动增加数值，向下滚动减少数值。
    3. **箭头按钮**: 点击每个数字上方和下方的小**上/下箭头**进行步进调整。

### 模式选择
一组按钮允许您更改操作模式。
*   **当前模式**: 当前选中的模式以**绿色**高亮显示。
*   **支持的模式**:
    *   **第一行**: USB, DATA-U, CW-U, RTTY-U, AM, FM, FM-N, C4FM-DN, PSK
    *   **第二行**: LSB, DATA-L, CW-L, RTTY-L, AM-N, DATA-FM, DATA-FM-N, C4FM-VW

---

## 3. 发射控制 (中间面板)

### PTT (一键通)
*   **发射按钮 (Transmit)**: 切换电台的发射状态。
    *   **白色**: 接收 (RX) 状态。
    *   **红色**: 发射 (TX) 状态。
    *   *机制*: 这会切换所选 **PTT 端口** 上的 RTS 信号。

### 功率控制
*   **功率 (W)**: 用于调整射频输出功率的滑块。
*   **数值显示**: 显示目标功率（瓦特）。
*   **设备类型指示**: 显示检测到的电台功率等级（例如 "FIELD", "SPA1"）。
    *   **FIELD**: 范围 1–10 W。
    *   **SPA1**: 范围 5–100 W。
    *   **Standard**: 范围 1–100 W。

---

## 4. 接收预处理 (中间面板)

此部分控制接收机的增益和自动增益控制设置。

### AGC (自动增益控制)
控制电台如何处理变化的信号强度。
*   **选项**: OFF (关), FAST (快), MID (中), SLOW (慢), AUTO (自动)。
*   **显示逻辑**:
    *   如果您选择 **AUTO**，电台会根据当前模式确定最佳速度（例如 CW 默认为 FAST，SSB 默认为 SLOW）。
    *   **视觉指示**: 如果电台处于 AUTO 模式且内部选择了 "MID"，**AUTO** 按钮和 **MID** 按钮将**同时**高亮显示。这让您知道您处于自动模式*并且*当前的有效速度是多少。

### 前置放大器 (Preamp)
调整不同波段的接收机前端增益。
*   **HF/50 MHz**:
    *   **IPO**: 截点优化 (前置放大器关闭)。最适合强信号环境。
    *   **AMP1**: 低增益前置放大器。
    *   **AMP2**: 高增益前置放大器。
*   **VHF / UHF**:
    *   **OFF / ON**: 切换这些波段的前置放大器。

---

## 5. 手动陷波控制 (右侧/底部面板)

此高级面板允许您可视化音频并手动滤除干扰音。

### 控制
*   **启用 Notch (Enable Notch)**: 复选框，用于激活电台上的手动陷波滤波器。
*   **频率 (Hz)**:
    *   **输入框**: 输入特定频率 (10–3200 Hz) 并点击 **设置 (Set)**。
    *   **当前 (Current)**: 显示电台当前激活的数值。
    *   **读取 (Read)**: 从电台刷新显示的数值。

### 音频瀑布图 / 频谱
*   **输入设备 (Input Device)**: 选择瀑布图显示的音频源。
    *   *默认逻辑*: 软件扫描音频设备并优先选择名称中包含 "**USB Audio Device**" 的设备（通常是内置电台声卡）。
*   **瀑布图显示**: 显示接收音频的实时频谱图。
    *   **X轴**: 时间 (滚动历史)。
    *   **Y轴**: 音频频率 (0–4000 Hz)。
*   **交互**:
    *   **点击设置陷波**: 点击瀑布图上的任意位置将自动将手动陷波频率设置为该音调。
    *   **视觉反馈**: 瀑布图上会出现两条红色水平线，指示活动陷波滤波器的位置和宽度（约 100 Hz）。

---

## 6. 仪表 (底部面板)

一排条形仪表提供来自电台的实时遥测数据。每个仪表都有一条红色的“阈值”线，指示标称值或极限值。

| 仪表 | 描述 | 单位 | 阈值 (红线) |
| :--- | :--- | :--- | :--- |
| **S_MAIN** | 信号强度 | S-Units / dB | S9 |
| **COMP** | 语音压缩电平 | dB | 15 dB |
| **ALC** | 自动电平控制电压 | % | 100% |
| **PO** | 输出功率 | Watts | 10 W (视情况而定) |
| **SWR** | 驻波比 | 比率 | 3.0 |
| **IDD** | 漏极电流 | Amps | 2 A |
| **VDD** | 电源电压 | Volts | 13.8 V |

*   **刷新率**: 仪表大约每秒更新一次（默认），以尽量减少 CAT 总线流量。

---

## 7. 故障排除

*   **"Need CAT and PTT ports" (需要 CAT 和 PTT 端口)**: 您必须为两个字段都选择一个 COM 端口。如果您只有一根线，您可能需要为两者选择相同的端口，或者检查您的驱动程序是否创建了两个虚拟端口（Standard 和 Enhanced）。
*   **仪表不动**: 确保连接处于活动状态（状态栏显示 "Connected"）。检查是否有其他程序占用了 COM 端口。
*   **瀑布图是黑的**: 确保选择了正确的 **输入设备**。它应该匹配与您电台 USB 连接关联的 "Line In" 或 "Microphone" 设备。
*   **Rigctl 不工作**: 确保没有其他软件正在使用端口 4532。如果您在 UI 中更改了端口，请更新您的外部日志/软件以匹配。


## 7. 硬件限制与校准

### SPA-1 / Optima 用户重要提示
由于开发者目前使用的是 **FTX-1 Field** 版本（独立 10W），遥测系统专门针对低功率便携操作进行了调整。

* **PO (输出功率) 精度**: 瓦特刻度和仪表偏转是针对 10W 内部 PA 校准的。对于 100W 用户，仪表可能会过早达到上限或显示错误的比例。
* **IDD (漏极电流) 精度**: IDD 仪表目前针对 Field 单元的典型消耗（最大约 2A）进行了校准。100W 操作需要明显更高的电流，目前尚未在此 UI 中准确映射。

---

## 8. 关于 SPA-1 (100W) 校准的说明

目前，本软件是使用 **FTX-1 Field (10W 独立)** 版本开发和测试的。由于我的桌面上没有 **Optima SPA-1 (100W)** 功放，**功率 (PO)** 和 **电流 (IDD)** 仪表尚未针对大功率操作进行完全校准。

**我非常需要您的帮助！** 如果您正在使用 Optima SPA-1 设置，软件可能会显示不准确的功率和电流读数。如果您愿意帮助我为整个社区改进这一点，如果您能分享几张照片或一段简短的视频，显示不同功率水平下的 PO 和 IDD 读数，我将不胜感激。

您的数据将帮助我微调这些仪表背后的数学运算，使它们对每一位 FTX-1 所有者都能完美工作。欢迎通过项目仓库联系！

---
